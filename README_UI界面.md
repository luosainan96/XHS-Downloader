# 小红书评论提取器 - Web UI界面

## 🖼️ 功能介绍

全新的Web用户界面，让小红书评论提取变得简单易用！

### ✨ 主要特性

- **🌐 Web界面** - 现代化的浏览器界面，无需命令行操作
- **📝 灵活输入** - 支持单个链接或批量链接输入
- **🔍 链接验证** - 自动验证小红书链接格式
- **📊 实时进度** - 实时显示提取进度和当前任务
- **📋 处理日志** - 详细的处理日志，实时查看状态
- **📈 结果统计** - 清晰的成功/失败统计和详细结果
- **⚙️ 灵活配置** - 可配置Cookie和输出目录

### 🎯 核心功能

1. **🖼️ 评论图片自动下载** - 按"用户昵称_评论时间_评论内容_序号"格式命名
2. **📁 有序文件组织** - 图片存储在用户文件夹的images子目录
3. **🔐 持久化登录状态** - 只需登录一次，自动保存浏览器会话
4. **📄 分页获取全部评论** - 不限制评论数量，支持大量评论作品
5. **🚀 智能加载更多** - 自动检测并加载更多评论

## 🚀 快速开始

### 1. 安装依赖

```bash
# 安装Streamlit
python3 -m pip install streamlit

# 确保已安装其他依赖
python3 -m pip install playwright aiofiles rich aiohttp
playwright install chromium
```

### 2. 启动应用

```bash
# 方法1: 使用启动脚本（推荐）
python3 start_ui.py

# 方法2: 直接启动Streamlit
python3 -m streamlit run comment_extractor_ui.py
```

### 3. 访问界面

浏览器会自动打开，或手动访问：`http://localhost:8501`

## 📖 使用指南

### 第一步：配置设置

1. **Cookie设置**
   - 在浏览器中登录小红书
   - 打开开发者工具（F12）
   - 复制Cookie值粘贴到输入框

2. **输出目录**
   - 默认为 `Comments_Dynamic`
   - 可以自定义其他目录

### 第二步：输入链接

**单个链接模式:**
- 在输入框中粘贴一个小红书作品链接

**批量链接模式:**
- 每行输入一个链接
- 支持多个作品同时处理

### 第三步：链接验证

- 系统会自动验证链接格式
- ✅ 有效链接显示绿色状态
- ❌ 无效链接显示红色状态
- 显示作品ID预览

### 第四步：开始提取

1. 确保Cookie已输入
2. 确保有有效链接
3. 点击"🚀 开始提取评论"按钮

### 第五步：监控进度

- **实时进度条** - 显示整体进度百分比
- **当前任务** - 显示正在处理的作品
- **处理日志** - 实时查看详细处理信息
- **状态指示** - 清晰的状态标识

## 📊 界面布局

### 左侧主内容区
- 链接输入和验证
- 开始提取按钮

### 右侧状态区
- 提取状态指示器
- 实时进度条
- 处理日志显示

### 侧边栏
- Cookie配置
- 输出设置
- 功能说明

### 底部结果区
- 提取结果统计
- 详细结果表格
- 输出目录信息

## 🎨 界面特色

### 🔄 实时更新
- 进度条实时更新
- 日志信息即时显示
- 自动刷新状态

### 📱 响应式设计
- 适配不同屏幕尺寸
- 清晰的布局层次
- 友好的用户体验

### 🎯 智能提示
- 输入验证提示
- 状态说明信息
- 错误处理提示

## 📂 输出结果

提取完成后，会在指定目录生成以下结构：

```
Comments_Dynamic/
├── [作品标题1]/
│   ├── [用户昵称1]/
│   │   ├── images/
│   │   │   ├── 用户昵称_时间_内容_1.jpg
│   │   │   └── 用户昵称_时间_内容_2.png
│   │   ├── 评论内容.txt
│   │   └── 原始数据.json
│   └── [用户昵称2]/
│       └── ...
└── [作品标题2]/
    └── ...
```

## ⚠️ 注意事项

1. **Cookie获取**
   - 必须在已登录的浏览器中获取
   - Cookie会定期过期，需要重新获取

2. **网络环境**
   - 需要稳定的网络连接
   - 某些网络环境可能需要代理

3. **处理时间**
   - 大量评论的作品处理时间较长
   - 图片下载会增加处理时间

4. **浏览器要求**
   - 首次运行需要下载Chromium浏览器
   - 确保有足够的磁盘空间

## 🔧 故障排除

### 常见问题

**Q: 启动失败显示找不到streamlit?**
A: 确保已正确安装Streamlit：`python3 -m pip install streamlit`

**Q: 链接验证失败?**
A: 确保链接格式正确，包含 `xiaohongshu.com/explore/`

**Q: Cookie失效?**
A: 重新登录小红书并获取新的Cookie

**Q: 提取失败?**
A: 检查网络连接和Cookie是否有效

### 性能优化

- 批量处理时建议每次不超过10个链接
- 大图片较多时会增加处理时间
- 可以在网络较好的环境下运行

## 🤝 技术支持

- 基于Streamlit构建的现代Web界面
- 异步处理提升性能
- 实时进度反馈
- 完善的错误处理机制

享受全新的可视化评论提取体验！🎉